{"version":3,"sources":["components/Game/AnswerI/AnswerI.js","components/Game/Params.js","components/Game/DialogBox/PhraseText.js","components/Game/DialogBox/DialogBox.js","components/Game/Visual/img-object.js","components/Game/Visual/scene-object.js","components/Game/Visual/shaking.js","components/Game/Visual/Visual.js","game/parameters.js","components/Game/Loading/Loading.js","components/Game/Audio/audio-element.js","components/Game/Audio/AudioPlayer.js","game/ranges.js","components/Game/Settings/FullScreen.js","components/Game/Settings/AudioSwitcher.js","components/Game/Settings/Settiings.js","components/Game/Ending/ImageItem.js","components/Game/Ending/Ending.js","components/Game/Alert/Alert.js","components/Game/UI.js","components/Game/Screen.js","mlpa_engine/graduation.js","mlpa_engine/parameter.js","mlpa_engine/phrase.js","mlpa_engine/range.js","mlpa_engine/stage.js","mlpa_engine/stuff.js","mlpa_engine/topic.js","mlpa_engine/change.js","mlpa_engine/interf.js","game/loc_example.js","mlpa_engine/loc.js","game/grads.js","components/Game/Game.js","components/Editor/Topics/TopicItem.js","components/Editor/Stages/StageItem.js","components/Editor/Stuffs/StuffItem.js","components/Editor/Ranges/RangeItem.js","components/Editor/Stuffs/AddStuff.js","components/Editor/Stages/Stage.js","components/Editor/Topics/Topic.js","components/Editor/Topics/AddTopic.js","components/Editor/Editor.js","App.js","serviceWorker.js","index.js"],"names":["AnswerI","React","Component","this","props","text","click","disabled","isHiding","isAchiev","disClass","achievClass","className","onClick","toUpperCase","PhraseText","state","isStart","curText","balText","string","Boolean","find","p","pAnsswerd","writingFinish","isPlayer","curLen","length","newText","slice","timeout","checkPoint","substr","Math","random","setTimeout","setState","nextLetterLoop","isEnding","title","titleClass","DialogBox","dDelay","isPAnsserd","pPhrase","cPhrase","hiding","isLoaded","hidingClass","pAnswer","cAnswer","ImgObject","image","slot","min","max","param","SceneObject","x","y","imgName","width","Shaking","speed","ampl","value","stage","calcSpeed","maxSpeed","calcAmpl","maxAmpl","update","PI","newMaxSpeed","newMaxAmpl","sin","Visual","drawImg","obj","ctx","progress","img","images","name","currProgress","locFactor","height","getPosition","camZoom","camX","camY","screenWidth","landWidth","screenHeight","landHeight","drawImage","shaking","drawSceneLopp","params","isStarted","newCanvas","document","createElement","newCtx","getContext","key","scene","getCorrImgName","window","requestAnimationFrame","c","objects","positions","prog","back","legs","body","head","landSizes","index","pos","first","last","factor","refs","myCanvas","loaderLoop","forEach","object","loadImage","sceneObject","Image","url","src","location","href","onload","event","target","push","loadFinished","slotName","corrImages","filter","corrImg","ref","style","Loading","AudioElement","rangeName","audio","fileName","updateLoop","isPlayed","volume","vMax","vStep","pause","isOn","play","AudioPlayer","musics","getAudio","fileN","Audio","loop","preload","ranges","checkRange","r","corrRanges","correctRanges","range","result","m","audioPlayed","getAudioName","FullScreen","render","icoClass","isFullScren","fullScreenOn","fullscreenElement","screenDom","getElementById","getFullScreen","exitFullscreen","requestFullscreen","AudioSwitcher","audioSwitch","Settings","methods","data","ImageItem","isCurrent","goNext","disClassName","alt","Ending","endData","quantity","currentImg","imagesLoaded","loader","endDataSum","map","reduce","a","b","i","endingNext","topicName","imagesItems","e","alert","display","Alert","UI","answers","id","loc","currStageId","getStartId","currentStuff","_getStuffs","s","isIntro","_getPhrases","isGeneral","getStageData","alertText","stageId","interf","getInterfaceStage","phrase","replic","newStage","stages","isFin","_getTopic","topic_id","stuffId","stuff","stuffs","changes","change","_getParam","paramName","term","newStageId","next_stage_id","getCorrectPhrase","calcStuff","delayParam","lim","answersItems","answer","checkStuffByAchiev","generalPhrase","currentStage","currentTopic","gameUI","loadingAnim","topicQ","topicLim","Screen","backgroundColor","marginLeft","position","overflow","children","Graduation","rangesNames","Parameter","Phrase","stuff_id","Range","Stage","isBeen","Stuff","isA","stage_id","Topic","graduation","stuffIntro","gradNames","Change","Interf","locE","grads","topics","phrases","addStages","topicId","newStages","concat","console","error","_getStages","checkStageFinal","_getRange","checkGrads","gName","checkGrad","gradName","_getGrad","rName","idState","getId","type","startTopic","topic","startStage","_editParams","getGeneralPhrase","nextStage","grad","neutralPhrase","_getCorrectStuffs","answersAll","replicStuff","answersNotA","nextTopic","nextStuff","sort","finalTopic","finalStage","finalAnswer","resAnswers","ssign","k","addTopics","addStuffs","nextStageId","addPhrases","newStuff","newStuffs","newPhrases","phraseId","newValue","addParams","cParam","addRanges","cRange","addGrads","cGrad","Game","mlpaState","defaultParams","screen","newWidth","factorW","newHeight","factorH","getSizes","TopicItem","isSelect","margin","padding","cursor","color","border","StageItem","stuffText","isFinal","StuffItem","allStages","viewAchievs","stat","goStage","allTopics","getPhrases","isSpecial","changesItems","inputElem","checked","onChange","updateStuff","Number","marginRight","paddingTop","paddingBottom","linkItems","getStages","unshift","linkThemesItems","t","next","newCurrTopic","topicStages","removeButton","removeStuff","viewBox","updatePhrase","RangeItem","AddStuff","addStuff","currentRange","sortItems","stuffA","stuffB","isTopA","acheivs","pAnswers","changeStage","getStuffs","splitStuffs","stuffsItems","shift","generStuff","noRanges","rangesItems","getParam","align","removeStage","updateStage","nextPhrase","newStageStart","showGrads","stagesItems","curStage","stageView","updateTopic","g","updateTopicGrads","removeTopic","addStage","AddTopic","optItems","addTopic","App","hostname","match","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.9988f3ad.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default class AnswerI extends React.Component {\r\n  render() {\r\n    const { text, click, disabled, isHiding, isAchiev } = this.props;\r\n    const disClass = disabled ? (isHiding ? \"disabled\" : \"\") : \"undisabled\";\r\n    const achievClass = isAchiev ? \"achievement\" : \"\";\r\n    return (\r\n      <div>\r\n        <div\r\n          className={`answer ${disClass} ${achievClass}`}\r\n          onClick={() => {\r\n            if (!disabled) click();\r\n          }}\r\n        >\r\n          {text.toUpperCase()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class Params extends React.Component {\r\n  /* constructor() {\r\n    super();\r\n\r\n  }*/\r\n\r\n  correctGrads() {\r\n    const { grads, checkGrad } = this.props;\r\n    const corrGrads = grads.filter(g => checkGrad(g.name));\r\n\r\n    return corrGrads;\r\n  }\r\n  render() {\r\n    const { params, lim, edit } = this.props;\r\n\r\n    const correctGrads = this.correctGrads();\r\n    const correctGradsItems = correctGrads.map(g => (\r\n      <div key={g.name}>\r\n        \r\n        <span style={{ color: \"white\" }}>{g.name}</span>\r\n      </div>\r\n    ));\r\n\r\n    const paramItems = params.map(param => {\r\n      return param.isAchiev ? (\r\n        <div key={param.name}>\r\n          <input type=\"checkbox\" disabled checked={param.value} />{\" \"}\r\n          <span style={{ color: \"white\" }}>{param.name}</span>\r\n        </div>\r\n      ) : (\r\n        <div key={param.name}>\r\n          <div>\r\n            <button\r\n              onClick={() => {\r\n                edit(param.name, -1);\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n            <div\r\n              style={{\r\n                display: \"inline-block\",\r\n                height: \"15px\",\r\n                width: `${param.value * 10}px`,\r\n                backgroundColor: \"red\"\r\n              }}\r\n            ></div>\r\n            <div\r\n              style={{\r\n                display: \"inline-block\",\r\n                height: \"15px\",\r\n                width: `${(lim - param.value) * 10}px`,\r\n                backgroundColor: \"gray\"\r\n              }}\r\n            ></div>\r\n\r\n            <button\r\n              onClick={() => {\r\n                edit(param.name, 1);\r\n              }}\r\n            >\r\n              +\r\n            </button>\r\n            <span style={{ color: \"white\" }}>{param.name}</span>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div style={{position: 'absolute', top: '0'}}>\r\n        {paramItems}\r\n        {correctGradsItems}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default class PhraseText extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isStart: true, curText: \"\", balText: \"\" };\r\n  }\r\n  checkPoint(string) {\r\n    const points = [\".\", \"!\", \"?\"];\r\n    return Boolean(points.find(p => `${p} ` === string));\r\n  }\r\n  nextLetterLoop() {\r\n    const { text, pAnsswerd, writingFinish, isPlayer } = this.props;\r\n\r\n    const { curText } = this.state;\r\n    if (text !== curText) {\r\n      const curLen = curText.length;\r\n\r\n      const newText = text.slice(0, curLen + 1);\r\n      const balText = text.slice(curLen + 1);\r\n\r\n      const isPoint = this.checkPoint(\r\n        newText.substr(newText.length - 2, newText.length)\r\n      );\r\n\r\n      const timeout = isPoint ? Math.random() * 350 + 150 : 20;\r\n\r\n      setTimeout(() => {\r\n        this.setState({ curText: newText, isStart: false, balText });\r\n        this.nextLetterLoop();\r\n      }, timeout);\r\n    } else isPlayer ? pAnsswerd() : writingFinish();\r\n  }\r\n  render() {\r\n    const { isPlayer, isEnding } = this.props;\r\n    const { isStart, curText, balText } = this.state;\r\n    if (isStart) this.nextLetterLoop();\r\n    const title = isEnding ? \"\" : isPlayer ? \"Я\" : \"Она\";\r\n    const titleClass = isPlayer ? \"text-p\" : \"text-c\";\r\n    return (\r\n      <div className=\"phrase-text\">\r\n        <span className={titleClass}>{title}/</span> {curText}\r\n        <span className=\"bal-text\">{balText}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\nimport PhraseText from \"./PhraseText\";\r\n\r\nexport default class DialogBox extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = { isPAnsserd: false };\r\n  }\r\n\r\n  pAnsswerd = () => {\r\n    const { dDelay } = this.props;\r\n    setTimeout(() => {\r\n      this.setState({ isPAnsserd: true });\r\n    }, dDelay);\r\n  };\r\n  render() {\r\n    const {\r\n      pPhrase,\r\n      cPhrase,\r\n      writingFinish,\r\n      hiding,\r\n      isEnding,\r\n      isLoaded\r\n    } = this.props;\r\n    const { isPAnsserd } = this.state;\r\n\r\n    const hidingClass = hiding ? \"phrase-hiding\" : \"\";\r\n\r\n    const pAnswer =\r\n      isLoaded && !isEnding ? (\r\n        <PhraseText\r\n          isEnding={isEnding}\r\n          text={pPhrase}\r\n          isPlayer\r\n          pAnsswerd={this.pAnsswerd}\r\n        />\r\n      ) : null;\r\n\r\n    const cAnswer =\r\n      isPAnsserd || isEnding ? (\r\n        <PhraseText\r\n          isEnding={isEnding}\r\n          text={cPhrase}\r\n          writingFinish={writingFinish}\r\n        />\r\n      ) : null;\r\n\r\n    return (\r\n      <div className=\"dialog-box\">\r\n        <div className={`phrase-interface ${hidingClass}`}>\r\n          <div className=\"phrase-content\">\r\n            {pAnswer}\r\n            {cAnswer}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default class ImgObject {\r\n  constructor(image, slot = \"\", min, max, param = null) {\r\n    this.image = image;\r\n    this.slot = slot;\r\n    this.min = min;\r\n    this.max = max;\r\n    this.param = param;\r\n  }\r\n}\r\n","export default class SceneObject {\r\n  constructor(x = 0, y = 0, imgName, width) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.imgName = imgName;\r\n    this.width = width\r\n  }\r\n}\r\n","export default class Shaking {\r\n  constructor(speed, ampl) {\r\n    this.maxSpeed = speed;\r\n    this.maxAmpl = ampl;\r\n    this.speed = speed;\r\n    this.ampl = ampl;\r\n  }\r\n  value = 0;\r\n  stage = 0;\r\n\r\n  calcSpeed = () => {\r\n    this.speed = Math.random() * this.maxSpeed * 0.3 + this.maxSpeed * 0.7;\r\n  };\r\n  calcAmpl = () => {\r\n    this.ampl = Math.random() * this.maxAmpl * 0.5 + this.maxAmpl * 0.5;\r\n  };\r\n  update = param => {\r\n    this.stage += this.speed;\r\n\r\n    if (this.stage > 2 * Math.PI) {\r\n      this.stage = 0;\r\n\r\n      this.calcAmpl();\r\n      this.calcSpeed();\r\n    }\r\n    if (param) {\r\n      const newMaxSpeed = param.value < 3 ? 6 : param.value < 10 ? 0.1 : 0.05;\r\n\r\n      const newMaxAmpl = -Math.sin((param.value / 15) * (-Math.PI / 2)) * 10;\r\n\r\n      if (this.maxSpeed !== newMaxSpeed) {\r\n        this.maxSpeed = newMaxSpeed;\r\n        this.calcSpeed();\r\n      }\r\n      if (this.maxAmpl !== newMaxAmpl) {\r\n        this.maxAmpl = newMaxAmpl;\r\n      }\r\n    }\r\n\r\n    this.value = Math.sin(this.stage) * this.ampl;\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport ImgObject from \"./img-object\";\r\nimport SceneObject from \"./scene-object\";\r\nimport \"./style.css\";\r\n\r\nimport {\r\n  PARAM_EQUILIBRIUM,\r\n  PARAM_DETERMINATION\r\n} from \"../../../game/parameters\";\r\nimport Shaking from \"./shaking\";\r\n\r\nexport default class Visual extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.c = null;\r\n    this.ctx = null;\r\n    this.shaking = {\r\n      x: new Shaking(0.05, 10),\r\n      y: new Shaking(0.05, 7)\r\n    };\r\n    this.objects = [\r\n      new ImgObject(\"road\", \"back\"),\r\n      new ImgObject(\"legs\", \"legs\"),\r\n      new ImgObject(\"doubt\", \"body\", 1, 5, PARAM_DETERMINATION),\r\n      new ImgObject(\"uncertainty\", \"body\", 6, 10, PARAM_DETERMINATION),\r\n      new ImgObject(\"readiness\", \"body\", 11, 15, PARAM_DETERMINATION),\r\n      //new ImgObject(\"tension\", \"body\"),\r\n      new ImgObject(\"squinted\", \"head\", 1, 5, PARAM_EQUILIBRIUM),\r\n      new ImgObject(\"horror\", \"head\", 6, 10, PARAM_EQUILIBRIUM),\r\n      new ImgObject(\"fear\", \"head\", 11, 15, PARAM_EQUILIBRIUM)\r\n      /* new ImgObject(\"apathy\", \"head\"),\r\n      new ImgObject(\"trembling\", \"head\")*/\r\n    ];\r\n\r\n\r\n    this.currProgress = 0;\r\n\r\n    this.positions = [\r\n      { prog: 0, camX: 915, camY: 386, camZoom: 20 },\r\n      { prog: 200, camX: 924, camY: 395, camZoom: 13.82 },\r\n      { prog: 400, camX: 933, camY: 410, camZoom: 8.24 },\r\n\r\n      { prog: 600, camX: 942, camY: 440, camZoom: 3.82 },\r\n      { prog: 800, camX: 951, camY: 480, camZoom: 1.98 },\r\n      { prog: 1000, camX: 960, camY: 540, camZoom: 1.4 }\r\n    ];\r\n\r\n    const girlX = 800;\r\n    const girlY = 345;\r\n    this.scene = {\r\n      back: new SceneObject(0, 0, \"road\", 1920),\r\n      legs: new SceneObject(girlX, girlY, \"legs\", 200),\r\n      body: new SceneObject(girlX, girlY, \"doubt\", 200),\r\n      head: new SceneObject(girlX, girlY, \"horror\", 200)\r\n    };\r\n    this.images = [];\r\n\r\n    const { landWidth, landHeight } = this.props.landSizes;\r\n\r\n    this.landWidth = landWidth;\r\n    this.landHeight = landHeight;\r\n\r\n    this.state = { isStarted: false };\r\n  }\r\n\r\n  getPosition() {\r\n    if (this.positions.length === 1) return this.positions[0];\r\n    for (let index = 0; index < this.positions.length; index++) {\r\n      const pos = this.positions[index];\r\n      if (this.currProgress < pos.prog) {\r\n        const first = this.positions[index - 1];\r\n        const last = pos;\r\n        const factor =\r\n          (this.currProgress - first.prog) / (last.prog - first.prog);\r\n        const camZoom = first.camZoom + (last.camZoom - first.camZoom) * factor;\r\n        const camX = first.camX + (last.camX - first.camX) * factor;\r\n        const camY = first.camY + (last.camY - first.camY) * factor;\r\n        return { camZoom, camX, camY };\r\n      } else if (index === this.positions.length - 1) {\r\n        return pos;\r\n      }\r\n    }\r\n  }\r\n\r\n  drawImg = (obj, ctx) => {\r\n    const {progress} = this.props\r\n    const { img } = this.images.find(image => image.name === obj.imgName);\r\n    const { width, x, y } = obj;\r\n\r\n    if (progress > this.currProgress) {\r\n      this.currProgress += 0.1;\r\n    }\r\n\r\n    const locFactor = width / img.width;\r\n    const height = img.height * locFactor;\r\n\r\n    const { camZoom, camX, camY } = this.getPosition();\r\n\r\n    const screenWidth = this.landWidth / 2;\r\n    const screenHeight = this.landHeight / 2;\r\n\r\n    ctx.drawImage(\r\n      img,\r\n      (x - camX) * camZoom + screenWidth + this.shaking.x.value,\r\n      (y - camY) * camZoom + screenHeight + this.shaking.y.value,\r\n      width * camZoom,\r\n      height * camZoom\r\n    );\r\n  };\r\n  async componentDidMount() {\r\n    if (!this.c && this.refs.myCanvas) {\r\n      this.c = this.refs.myCanvas;\r\n      this.ctx = this.c.getContext(\"2d\");\r\n\r\n      this.loaderLoop();\r\n    }\r\n  }\r\n\r\n  loaderLoop() {\r\n    this.objects.forEach(object => {\r\n      this.loadImage(object);\r\n    });\r\n  }\r\n\r\n  loadImage(sceneObject) {\r\n\r\n    const { slot, image } = sceneObject;\r\n    let img = new Image();\r\n    let url = slot ? `${slot}/` : \"\";\r\n    url += image;\r\n    img.src = `${window.location.href}/img/${url}.png`;\r\n    img.onload = event => {\r\n\r\n      const { target } = event;\r\n      this.images.push({ name: image, img: target });\r\n      if (this.images.length === this.objects.length) {\r\n        const { loadFinished } = this.props;\r\n        loadFinished();\r\n      }\r\n    };\r\n  }\r\n\r\n  getCorrImgName(slotName) {\r\n    const { params } = this.props;\r\n    const corrImages = this.objects.filter(obj => obj.slot === slotName);\r\n    let corrImg = corrImages.find(obj => {\r\n      if (obj.param) {\r\n        const param = params.find(p => p.name === obj.param);\r\n\r\n        return param.value <= obj.max && param.value >= obj.min;\r\n      } else return false;\r\n    });\r\n\r\n    if (!corrImg) {\r\n      corrImg = corrImages.find(img => !img.param);\r\n    }\r\n    return corrImg.image;\r\n  }\r\n\r\n  drawSceneLopp = () => {\r\n    const { params, isEnding } = this.props;\r\n    const param = params.find(p => p.name === PARAM_EQUILIBRIUM);\r\n\r\n    this.shaking.x.update(param);\r\n    this.shaking.y.update(param);\r\n\r\n    const { isStarted } = this.state;\r\n    if (!isStarted) this.setState({ isStarted: true });\r\n\r\n    const newCanvas = document.createElement(\"CANVAS\");\r\n    newCanvas.width = this.landWidth;\r\n    newCanvas.height = this.landHeight;\r\n    const newCtx = newCanvas.getContext(\"2d\");\r\n\r\n    for (let key in this.scene) {\r\n      const obj = this.scene[key];\r\n      obj.imgName = this.getCorrImgName(key);\r\n      this.drawImg(obj, newCtx);\r\n    }\r\n\r\n    this.ctx.drawImage(newCanvas, 0, 0);\r\n\r\n    if (!isEnding) window.requestAnimationFrame(this.drawSceneLopp);\r\n  };\r\n\r\n  render() {\r\n\r\n    const { width, height, isLoaded } = this.props;\r\n    const { isStarted } = this.state;\r\n\r\n    if (isLoaded && !isStarted) {\r\n      window.requestAnimationFrame(this.drawSceneLopp);\r\n    }\r\n\r\n    const className = isLoaded ? \"loaded\" : \"\";\r\n\r\n    return (\r\n      <div>\r\n        <canvas\r\n          className={className}\r\n          ref=\"myCanvas\"\r\n          width={this.landWidth}\r\n          height={this.landHeight}\r\n          style={{ width, height }}\r\n        ></canvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const PARAM_DETERMINATION = \"РЕШИМОСТЬ\";\r\nexport const PARAM_EQUILIBRIUM = \"УРАВНОВЕШЕННОСТЬ\";\r\n\r\nexport const PARAM_DOG = \"Собака\";\r\nexport const PARAM_GC = \"Знакомство\";\r\nexport const PARAM_CRUSH = \"Мертвец\";\r\nexport const PARAM_NOODLE = \"Любовь к лапше\";\r\nexport const PARAM_PHOTO = \"Фотограф\";\r\nexport const PARAM_PANICS = \"Панические атаки\";\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default class Loading extends React.Component {\r\n  render() {\r\n    return <div className=\"lds-dual-ring\"></div>;\r\n  }\r\n}\r\n","export default class AudioElement {\r\n  constructor(rangeName, audio, fileName) {\r\n    this.rangeName = rangeName;\r\n    this.fileName = fileName;\r\n    this.audio = audio;\r\n    this.audio.volume = 0;\r\n\r\n    this.isPlayed = false;\r\n    this.vStep = 1;\r\n    this.vMax = 10;\r\n    this.isOn = false;\r\n\r\n    this.updateLoop();\r\n  }\r\n\r\n  updateLoop = () => {\r\n    if (this.isPlayed) {\r\n      if (this.volume < this.vMax) this.volume += this.vStep;\r\n    } else {\r\n      if (this.volume > 0) {\r\n        this.volume -= this.vStep;\r\n      } else this.audio.pause();\r\n    }\r\n\r\n    if (!this.isOn) {\r\n      this.audio.pause();\r\n    } else this.audio.play();\r\n\r\n    setTimeout(this.updateLoop, 600);\r\n  };\r\n\r\n  get volume() {\r\n    return this.audio.volume * this.vMax;\r\n  }\r\n  set volume(value) {\r\n    this.audio.volume = value / this.vMax;\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport {\r\n  RANGE_PANIC,\r\n  RANGE_TENSION,\r\n  RANGE_STABILITY\r\n} from \"../../../game/ranges\";\r\nimport AudioElement from \"./audio-element\";\r\n\r\nexport default class AudioPlayer extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.musics = [\r\n      new AudioElement(RANGE_PANIC, this.getAudio(\"bells\"), \"bells\"),\r\n      new AudioElement(\r\n        RANGE_TENSION,\r\n        this.getAudio(\"piano-trap\"),\r\n        \"piano-trap\"\r\n      ),\r\n      new AudioElement(RANGE_STABILITY, this.getAudio(\"piano\"), \"piano\")\r\n    ];\r\n  }\r\n\r\n  getAudio(fileN) {\r\n    const audio = new Audio(`${window.location.href}/audio/music/${fileN}.wav`);\r\n    audio.loop = true;\r\n    audio.preload = \"auto\";\r\n\r\n    return audio;\r\n  }\r\n  correctRanges() {\r\n    const { ranges, checkRange } = this.props;\r\n    const corrRanges = ranges.filter(r => checkRange(r.name));\r\n\r\n    return corrRanges;\r\n  }\r\n  getAudioName() {\r\n    const corrRanges = this.correctRanges();\r\n    for (let range of corrRanges) {\r\n      const result = this.musics.find(m => m.rangeName === range.name);\r\n\r\n      return result?.fileName || \"\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { audioPlayed } = this.props;\r\n\r\n    const fileName = this.getAudioName();\r\n\r\n    this.musics.forEach(m => {\r\n      m.isOn = audioPlayed\r\n      if (m.fileName === fileName) m.isPlayed = true;\r\n      else m.isPlayed = false;\r\n    });\r\n\r\n    return null;\r\n  }\r\n}\r\n","export const RANGE_PANIC = \"ПАНИКА\";\r\nexport const RANGE_TENSION = \"НАПРЯЖЕННОСТЬ\";\r\nexport const RANGE_STABILITY = \"СТАБИЛЬНОСТЬ\";\r\n\r\nexport const RANGE_APATHY = \"АПАТИЯ\";\r\nexport const RANGE_UNCERTAINTY = \"НЕУВЕРЕННОСТЬ\";\r\nexport const RANGE_CONFIDENCE = \"УВЕРЕННОСТЬ\";\r\n\r\nexport const RANGE_DOG = \"УПОМИНАЛА О СОБАКЕ\";\r\nexport const RANGE_GC = \"УПОМИНАЛ О СЕБЕ\";\r\nexport const RANGE_CRUSH = \"УПОМИНАЛА О ПАРНЕ\";\r\nexport const RANGE_NOODLE = \"УПОМИНАЛА О ЛАПШЕ\";\r\nexport const RANGE_PHOTO = \"УПОМИНАЛА О ФОТО\";\r\nexport const RANGE_PANICS = \"УПОМИНАЛА О ПАНИКАХ\";\r\n","import React from \"react\";\r\n\r\nexport default class FullScreen extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = { isFullScren: false };\r\n  }\r\n  getFullScreen() {\r\n    return Boolean(document.fullscreenElement);\r\n  }\r\n  fullScreenOn() {\r\n    const screenDom = document.getElementById(\"screenDom\");\r\n\r\n    if (this.getFullScreen()) document.exitFullscreen();\r\n    else screenDom.requestFullscreen();\r\n\r\n    this.setState({ isFullScren: !this.getFullScreen() });\r\n  }\r\n  render = () => {\r\n    const {isFullScren} = this.state\r\n\r\n    const icoClass = isFullScren ? \"fas fa-compress\" : \"fas fa-expand\";\r\n\r\n    return (\r\n      <div className=\"sett\">\r\n        <button\r\n          className={`${icoClass} sett-btn`}\r\n          onClick={() => {\r\n            this.fullScreenOn();\r\n          }}\r\n        ></button>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default class AudioSwitcher extends React.Component {\r\n  render() {\r\n    const { audioSwitch, audioPlayed } = this.props;\r\n\r\n    const icoClass = audioPlayed ? \"fas fa-volume-up\" : \"fas fa-volume-mute\";\r\n\r\n    return (\r\n      <div className=\"sett\">\r\n        <button\r\n          className={`${icoClass} sett-btn`}\r\n          onClick={() => {\r\n            audioSwitch();\r\n          }}\r\n        ></button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport FullScreen from \"./FullScreen\";\r\nimport AudioSwitcher from \"./AudioSwitcher\";\r\n\r\nexport default class Settings extends React.Component {\r\n  render() {\r\n    const {methods, data} = this.props\r\n    return (\r\n      <div className=\"settings\">\r\n\r\n        <AudioSwitcher audioSwitch={methods.audioSwitch} audioPlayed={data.audioPlayed} />\r\n          <FullScreen />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default class ImageItem extends React.Component {\r\n  render() {\r\n    const { src, isCurrent, isHiding, goNext, disabled } = this.props;\r\n    const className = isCurrent ? \"appear\" : isHiding ? \"extin\" : \"\";\r\n    const disClassName = !disabled ? \"not-dis\" : \"\";\r\n\r\n    return (\r\n      <div className={`end-cont ${className} ${disClassName}`}>\r\n        <img\r\n          onClick={() => {\r\n            if (!disabled) {\r\n              goNext();\r\n            }\r\n          }}\r\n          className=\"end-img\"\r\n          src={src}\r\n          alt={\"img\"}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\nimport ImageItem from \"./ImageItem\";\r\n\r\nexport default class Ending extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.endData = [\r\n      {\r\n        name: \"gabriella\",\r\n        quantity: 5,\r\n        audio: \"\"\r\n      },\r\n      {\r\n        name: \"taisa\",\r\n        quantity: 5,\r\n        audio: \"\"\r\n      },\r\n\r\n      {\r\n        name: \"hurima\",\r\n        quantity: 7,\r\n        audio: \"\"\r\n      },\r\n      {\r\n        name: \"leya\",\r\n        quantity: 8,\r\n        audio: \"\"\r\n      },\r\n      {\r\n        name: \"lola\",\r\n        quantity: 4,\r\n        audio: \"\"\r\n      }\r\n    ];\r\n    this.state = { currentImg: 1, imagesLoaded: false };\r\n    this.images = [];\r\n    this.loader();\r\n  }\r\n\r\n  loader() {\r\n    const endDataSum = this.endData\r\n      .map(data => data.quantity)\r\n      .reduce((a, b) => a + b, 0);\r\n\r\n    this.endData.forEach(({ name, quantity }) => {\r\n      for (let i = 1; i <= quantity; i++) {\r\n        let img = new Image();\r\n        img.src = `${window.location.href}/img/endings/${name}/${i}.png`;\r\n        img.onload = event => {\r\n          const { target } = event;\r\n          this.images.push({ name: `${name}_${i}`, image: target });\r\n\r\n          if (this.images.length === endDataSum) {\r\n            this.setState({ imagesLoaded: true });\r\n          }\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { currentImg, imagesLoaded } = this.state;\r\n    const { endingNext, disabled, isEnding, topicName } = this.props;\r\n\r\n    const imagesItems = [];\r\n\r\n    if (imagesLoaded && isEnding) {\r\n      const { name, quantity } = this.endData.find(e => e.name === topicName);\r\n\r\n      for (let i = 1; i <= quantity; i++) {\r\n        const isCurrent = i === currentImg;\r\n\r\n        const image = this.images.find(\r\n          ({ name: imgName }) => imgName === `${name}_${i}`\r\n        );\r\n\r\n        imagesItems.push(\r\n          <ImageItem\r\n            disabled={disabled || !isCurrent}\r\n            isCurrent={isCurrent}\r\n            isHiding={i < currentImg}\r\n            goNext={() => {\r\n              if (isCurrent && currentImg - 1 < quantity && !disabled) {\r\n                this.setState({ currentImg: currentImg + 1 });\r\n                endingNext();\r\n              } else alert(\"ТИТРЫ\");\r\n            }}\r\n            key={i}\r\n            src={image?.image.src}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    const style = {\r\n      display: isEnding ? \"\" : \"none\"\r\n    };\r\n\r\n    return (\r\n      <div style={style} className=\"ending\">\r\n        {imagesItems}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default class Alert extends React.Component {\r\n  render() {\r\n    const { text } = this.props;\r\n    const className = text ? \"alert\" : \"\";\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"fas fa-lock-open alert-ico\"></div>\r\n        {text.toUpperCase()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport Params from \"./Params\";\r\nimport AnswerI from \"./AnswerI/AnswerI\";\r\nimport DialogBox from \"./DialogBox/DialogBox\";\r\nimport \"./style.css\";\r\nimport Visual from \"./Visual/Visual\";\r\nimport Loading from \"./Loading/Loading\";\r\nimport AudioPlayer from \"./Audio/AudioPlayer\";\r\nimport Settings from \"./Settings/Settiings\";\r\nimport Ending from \"./Ending/Ending\";\r\nimport { PARAM_DETERMINATION } from \"../../game/parameters\";\r\nimport Alert from \"./Alert/Alert\";\r\n\r\nexport default class UI extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.loc = props.loc;\r\n    const currStageId = this.loc.getStartId();\r\n    const currentStuff = this.loc._getStuffs(currStageId).find(s => s.isIntro);\r\n    const { text: pPhrase } = this.loc\r\n      ._getPhrases(currentStuff.id)\r\n      .find(p => !p.isGeneral);\r\n\r\n    const { cPhrase, answers } = this.getStageData(currStageId);\r\n    this.state = {\r\n      cPhrase,\r\n      pPhrase,\r\n      answers,\r\n      disabled: true,\r\n      currStageId,\r\n      isHiding: false,\r\n      dDelay: 1000,\r\n      isLoaded: false,\r\n      audioPlayed: false,\r\n      isEnding: false,\r\n      alertText: \"\"\r\n    };\r\n  }\r\n  getStageData(stageId) {\r\n    const interf = this.loc.getInterfaceStage(stageId);\r\n    const { answers, replic } = interf;\r\n    const { phrase } = replic;\r\n\r\n    const newStage = this.loc.stages.find(stage => stage.id === stageId);\r\n    const topic = this.loc._getTopic(newStage.topic_id);\r\n    const { isFin } = topic;\r\n\r\n    return {\r\n      cPhrase: phrase,\r\n      answers,\r\n      isFin\r\n    };\r\n  }\r\n  update(stuffId) {\r\n    const stuff = this.loc.stuffs.find(s => s.id === stuffId);\r\n    stuff.changes.forEach(change => {\r\n      const param = this.loc._getParam(change.paramName);\r\n      if (param.isAchiev && param.value !== change.term) {\r\n        setTimeout(() => {\r\n          this.setState({\r\n            alertText: param.name\r\n          });\r\n        }, 500);\r\n      }\r\n    });\r\n\r\n    const newStageId = stuff.next_stage_id;\r\n\r\n    const pPhrase = this.loc.getCorrectPhrase(stuffId);\r\n    const { cPhrase, answers, isFin } = this.getStageData(newStageId);\r\n\r\n    this.loc.calcStuff(stuffId);\r\n\r\n    this.setState({\r\n      isHiding: true,\r\n      disabled: true\r\n    });\r\n\r\n    setTimeout(() => {\r\n      const delayParam = this.loc._getParam(PARAM_DETERMINATION);\r\n      const dDelay = (this.loc.lim - delayParam.value) * 100;\r\n      this.setState({\r\n        isEnding: isFin,\r\n        pPhrase,\r\n        cPhrase,\r\n        currStageId: newStageId,\r\n        answers,\r\n        isHiding: false,\r\n        dDelay\r\n      });\r\n    }, 500);\r\n  }\r\n  endingNext = () => {\r\n    const { answers } = this.state;\r\n    if (answers.length) this.update(answers[0].id);\r\n  };\r\n  writingFinish() {\r\n    this.setState({ disabled: false });\r\n  }\r\n  audioSwitch = () => {\r\n    const { audioPlayed } = this.state;\r\n    this.setState({ audioPlayed: !audioPlayed });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      pPhrase,\r\n      cPhrase,\r\n      currStageId,\r\n      answers,\r\n      disabled,\r\n      isHiding,\r\n      dDelay,\r\n      isLoaded,\r\n      audioPlayed,\r\n      isEnding,\r\n      alertText\r\n    } = this.state;\r\n\r\n    const answersItems = answers.map(answer => {\r\n        const isAchiev = this.loc.checkStuffByAchiev(answer.id);\r\n\r\n        return (\r\n          <AnswerI\r\n            isAchiev={isAchiev}\r\n            key={answer.id}\r\n            text={answer.generalPhrase}\r\n            disabled={disabled}\r\n            isHiding={isHiding}\r\n            click={() => {\r\n              this.update(answer.id);\r\n            }}\r\n          />\r\n        );\r\n      }),\r\n      { width, height, landSizes } = this.props;\r\n\r\n    const currentStage = this.loc.stages.find(s => s.id === currStageId);\r\n    const currentTopic = this.loc._getTopic(currentStage.topic_id);\r\n\r\n    const gameUI =\r\n      isLoaded && !isEnding ? (\r\n        <div className=\"answers\">{answersItems}</div>\r\n      ) : null;\r\n    const loadingAnim = !isLoaded ? <Loading /> : null;\r\n\r\n    return (\r\n      <div>\r\n        {loadingAnim}\r\n        <Visual\r\n          progress={(this.loc.topicQ / this.loc.topicLim) * 1000}\r\n          isEnding={isEnding}\r\n          params={this.loc.params}\r\n          width={width}\r\n          height={height}\r\n          isLoaded={isLoaded}\r\n          loadFinished={() => this.setState({ isLoaded: true })}\r\n          landSizes={landSizes}\r\n        />\r\n        <Ending\r\n          topicName={currentTopic.name}\r\n          isEnding={isEnding}\r\n          disabled={disabled}\r\n          endingNext={this.endingNext}\r\n        />\r\n        <AudioPlayer\r\n          ranges={this.loc.ranges}\r\n          checkRange={this.loc.checkRange}\r\n          audioPlayed={audioPlayed}\r\n        />\r\n        {gameUI}\r\n        <DialogBox\r\n          isLoaded={isLoaded}\r\n          hiding={isHiding}\r\n          key={currStageId}\r\n          pPhrase={pPhrase}\r\n          cPhrase={cPhrase}\r\n          dDelay={dDelay}\r\n          isEnding={isEnding}\r\n          writingFinish={() => {\r\n            this.writingFinish();\r\n          }}\r\n        />\r\n        <Alert key={alertText} text={alertText} />\r\n        <Settings\r\n          methods={{ audioSwitch: this.audioSwitch }}\r\n          data={{ audioPlayed }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/*\r\n <Params\r\n          params={this.loc.params}\r\n          lim={this.loc.lim}\r\n          edit={(paramName, term) => {\r\n            this.loc._editParams([this.loc.cChange(paramName, term)]);\r\n            this.forceUpdate();\r\n          }}\r\n          grads={this.loc.grads}\r\n          checkGrad={this.loc.checkGrad}\r\n        />\r\n*/\r\n","import React from \"react\";\r\nimport \"./Settings/style.css\";\r\n\r\nexport default class Screen extends React.Component {\r\n  render() {\r\n    const { width, height } = this.props;\r\n    const style = {\r\n      width,\r\n      height,\r\n      display: \"inline-block\",\r\n      backgroundColor: \"black\",\r\n\r\n      marginLeft: `calc(50% - ${width / 2}px)`,\r\n      position: \"absolute\",\r\n      overflow: \"hidden\"\r\n    };\r\n    return (\r\n      <div id=\"screenDom\">\r\n        <div style={style}>\r\n          {this.props.children}\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default class Graduation {\r\n  constructor(name, rangesNames) {\r\n    this.name = name;\r\n    this.rangesNames = rangesNames;\r\n  }\r\n}\r\n","export default class Parameter {\r\n  constructor(name, value, isAchiev = false) {\r\n    this.name = name;\r\n    this.value = value;\r\n    this.isAchiev = isAchiev;\r\n  }\r\n}\r\n","export default class Phrase {\r\n  constructor(rangeName, text, isGeneral, id) {\r\n    this.rangeName = rangeName;\r\n    this.text = text;\r\n    this.isGeneral = isGeneral;\r\n    this.id = id;\r\n  }\r\n  stuff_id = null;\r\n}\r\n","export default class Range {\r\n  constructor(name, paramName, min, max) {\r\n    this.name = name;\r\n    this.paramName = paramName;\r\n    this.min = min;\r\n    this.max = max;\r\n  }\r\n}\r\n","export default class Stage {\r\n  constructor(isStart, id) {\r\n    this.id = id;\r\n    this.isStart = isStart\r\n  }\r\n  isBeen = false;\r\n  topic_id = null;\r\n}\r\n","export default class Stuff {\r\n  constructor(next_stage_id, changes = [], isA = false, id) {\r\n    this.next_stage_id = next_stage_id;\r\n    this.changes = changes;\r\n    this.isA = isA;\r\n    this.id = id;\r\n  }\r\n  isIntro = false;\r\n  stage_id = null;\r\n}\r\n","export default class Topic {\r\n  constructor(name, graduation, isFin, isStart, id, stuffIntro) {\r\n    this.name = name;\r\n    this.gradNames = [graduation]\r\n    this.isFin = isFin;\r\n    this.isStart = isStart;\r\n    this.id = id;\r\n    this.stuffIntro = stuffIntro\r\n  }\r\n}\r\n","export default class Change {\r\n  constructor(paramName, term) {\r\n    this.paramName = paramName;\r\n    this.term = term;\r\n  }\r\n}\r\n","export default class Interf {\r\n  constructor(generalPhrase, phrase, id) {\r\n    this.generalPhrase = generalPhrase;\r\n    this.phrase = phrase;\r\n    this.id = id;\r\n  }\r\n}\r\n","import { Loc } from \"./../mlpa_engine\";\r\n\r\nimport {\r\n  PARAM_EQUILIBRIUM,\r\n  PARAM_DETERMINATION,\r\n  PARAM_DOG,\r\n  PARAM_CRUSH,\r\n  PARAM_GC,\r\n  PARAM_NOODLE,\r\n  PARAM_PANICS,\r\n  PARAM_PHOTO\r\n} from \"./parameters\";\r\n\r\nimport {\r\n  RANGE_PANIC,\r\n  RANGE_TENSION,\r\n  RANGE_STABILITY,\r\n  RANGE_APATHY,\r\n  RANGE_UNCERTAINTY,\r\n  RANGE_CONFIDENCE,\r\n  RANGE_DOG,\r\n  RANGE_CRUSH,\r\n  RANGE_GC,\r\n  RANGE_NOODLE,\r\n  RANGE_PANICS,\r\n  RANGE_PHOTO\r\n} from \"./ranges\";\r\n\r\nimport {\r\n  GRAD_PAN_APA,\r\n  GRAD_PAN_UNC,\r\n  GRAD_PAN_CON,\r\n  GRAD_TEN_APA,\r\n  GRAD_TEN_UNC,\r\n  GRAD_TEN_CON,\r\n  GRAD_STAB_APA,\r\n  GRAD_STAB_UNC,\r\n  GRAD_STAB_CON,\r\n  GRAD_DOG,\r\n  GRAD_CRUSH,\r\n  GRAD_GC,\r\n  GRAD_NOODLE,\r\n  GRAD_PANICS,\r\n  GRAD_PHOTO,\r\n} from \"./grads\";\r\n\r\nconst locE = new Loc();\r\nlocE.addParams(\r\n  locE.cParam(PARAM_DETERMINATION, 2),\r\n  locE.cParam(PARAM_EQUILIBRIUM, 4),\r\n\r\n  locE.cParam(PARAM_DOG, false, true),\r\n\r\n  locE.cParam(PARAM_CRUSH, false, true),\r\n  locE.cParam(PARAM_GC, false, true),\r\n  locE.cParam(PARAM_NOODLE, false, true),\r\n  locE.cParam(PARAM_PANICS, false, true),\r\n  locE.cParam(PARAM_PHOTO, false, true)\r\n);\r\n\r\nlocE.addRanges(\r\n  locE.cRange(RANGE_PANIC, 1, 5, PARAM_EQUILIBRIUM),\r\n  locE.cRange(RANGE_TENSION, 6, 10, PARAM_EQUILIBRIUM),\r\n  locE.cRange(RANGE_STABILITY, 11, 15, PARAM_EQUILIBRIUM),\r\n\r\n  locE.cRange(RANGE_APATHY, 1, 5, PARAM_DETERMINATION),\r\n  locE.cRange(RANGE_UNCERTAINTY, 6, 10, PARAM_DETERMINATION),\r\n  locE.cRange(RANGE_CONFIDENCE, 11, 15, PARAM_DETERMINATION),\r\n\r\n  locE.cRange(RANGE_DOG, true, true, PARAM_DOG),\r\n  locE.cRange(RANGE_CRUSH, true, true, PARAM_CRUSH),\r\n  locE.cRange(RANGE_GC, true, true, PARAM_GC),\r\n  locE.cRange(RANGE_NOODLE, true, true, PARAM_NOODLE),\r\n  locE.cRange(RANGE_PANICS, true, true, PARAM_PANICS),\r\n  locE.cRange(RANGE_PHOTO, true, true, PARAM_PHOTO)\r\n);\r\nlocE.addGrads(\r\n  locE.cGrad(GRAD_PAN_APA, RANGE_PANIC, RANGE_APATHY),\r\n  locE.cGrad(GRAD_PAN_UNC, RANGE_PANIC, RANGE_UNCERTAINTY),\r\n  locE.cGrad(GRAD_PAN_CON, RANGE_PANIC, RANGE_CONFIDENCE),\r\n\r\n  locE.cGrad(GRAD_TEN_APA, RANGE_TENSION, RANGE_APATHY),\r\n  locE.cGrad(GRAD_TEN_UNC, RANGE_TENSION, RANGE_UNCERTAINTY),\r\n  locE.cGrad(GRAD_TEN_CON, RANGE_TENSION, RANGE_CONFIDENCE),\r\n\r\n  locE.cGrad(GRAD_STAB_APA, RANGE_STABILITY, RANGE_APATHY),\r\n  locE.cGrad(GRAD_STAB_UNC, RANGE_STABILITY, RANGE_UNCERTAINTY),\r\n  locE.cGrad(GRAD_STAB_CON, RANGE_STABILITY, RANGE_CONFIDENCE),\r\n\r\n  locE.cGrad(GRAD_DOG, RANGE_DOG),\r\n  locE.cGrad(GRAD_CRUSH, RANGE_CRUSH),\r\n  locE.cGrad(GRAD_GC, RANGE_GC),\r\n  locE.cGrad(GRAD_NOODLE, RANGE_NOODLE),\r\n  locE.cGrad(GRAD_PANICS, RANGE_PANICS),\r\n  locE.cGrad(GRAD_PHOTO, RANGE_PHOTO),\r\n\r\n);\r\n\r\nexport default locE;\r\n","import Parameter from \"./parameter\";\r\nimport Range from \"./range\";\r\nimport Graduation from \"./graduation\";\r\nimport Phrase from \"./phrase\";\r\nimport Stuff from \"./stuff\";\r\nimport Change from \"./change\";\r\nimport Stage from \"./stage\";\r\nimport Topic from \"./topic\";\r\nimport Interf from \"./interf\";\r\nimport { PARAM_CRUSH } from \"../game/parameters\";\r\n\r\nexport default class Loc {\r\n  params = [];\r\n  ranges = [];\r\n  grads = [];\r\n  topics = [];\r\n\r\n  stuffs = [];\r\n  stages = [];\r\n  phrases = [];\r\n\r\n  lim = 15;\r\n\r\n  topicLim = 8;\r\n  topicQ = 0;\r\n\r\n  cParam(name, value, isAchiev) {\r\n    return new Parameter(name, value, isAchiev);\r\n  }\r\n  addParams(...params) {\r\n    this.params = this.params.concat(params);\r\n  }\r\n\r\n  cRange(name, min, max, paramName) {\r\n    return new Range(name, paramName, min, max);\r\n  }\r\n  addRanges(...ranges) {\r\n    this.ranges = this.ranges.concat(ranges);\r\n  }\r\n\r\n  cGrad(name, ...rangesNames) {\r\n    return new Graduation(name, rangesNames);\r\n  }\r\n  addGrads(...grads) {\r\n    this.grads = this.grads.concat(grads);\r\n  }\r\n\r\n  cTopic(name, gradName, isFin, isStart, ...stages) {\r\n    const topicId = this.getId(\"topics\");\r\n    this.addTopics(new Topic(name, gradName, isFin, isStart, topicId));\r\n    this.addStages(topicId, ...stages);\r\n  }\r\n\r\n  addTopics(...topics) {\r\n    this.topics = this.topics.concat(topics);\r\n  }\r\n\r\n  cStage(isStart, ...answers) {\r\n    const stageId = this.getId(\"stages\");\r\n    this.addStuffs(stageId, ...answers);\r\n    return new Stage(isStart, stageId);\r\n  }\r\n\r\n  addStages = (topicId, ...stages) => {\r\n    if (this._getTopic(topicId)) {\r\n      const newStages = stages.map(stage => {\r\n        return { ...stage, topic_id: topicId };\r\n      });\r\n      this.stages = this.stages.concat(newStages);\r\n    } else console.error(`Topic ${topicId} not found!`);\r\n  };\r\n\r\n  cStuff(props, ...phrases) {\r\n    let { id: nextStageId, changes = [], isA, isIntro } = props ? props : {};\r\n    const stuffId = this.getId(\"stuffs\");\r\n\r\n    this.addPhrases(stuffId, phrases);\r\n    const newStuff = new Stuff(\r\n      nextStageId,\r\n      !isA ? changes.filter(c => c.term) : [],\r\n      isA,\r\n      stuffId\r\n    );\r\n    newStuff.isIntro = isIntro;\r\n    return newStuff;\r\n  }\r\n\r\n  addStuffs(stageId, ...stuffs) {\r\n    const newStuffs = stuffs.map(stuff => {\r\n      let { isIntro } = stuff;\r\n      const next_stage_id = isIntro ? stageId : stuff.next_stage_id;\r\n      return { ...stuff, stage_id: stageId, next_stage_id };\r\n    });\r\n    this.stuffs = this.stuffs.concat(newStuffs);\r\n  }\r\n\r\n  addPhrases(stuffId, phrases) {\r\n    const newPhrases = phrases.map(phrase => ({\r\n      ...phrase,\r\n      stuff_id: stuffId\r\n    }));\r\n\r\n    this.phrases = this.phrases.concat(newPhrases);\r\n  }\r\n\r\n  cPhrase(text, isGeneral = false, rangeName) {\r\n    const phraseId = this.getId(\"phrases\");\r\n    return new Phrase(rangeName, text, isGeneral, phraseId);\r\n  }\r\n\r\n  cChange(paramName, term) {\r\n    return new Change(paramName, term);\r\n  }\r\n\r\n  _getTopic(id) {\r\n    return this.topics.find(topic => topic.id === id);\r\n  }\r\n  _getStages = topicId => {\r\n    return this.stages.filter(stage => stage.topic_id === topicId);\r\n  };\r\n\r\n  _getStuffs = stageId => {\r\n    return this.stuffs.filter(stuff => stuff.stage_id === stageId);\r\n  };\r\n\r\n  _getPhrases = stuffId => {\r\n    return this.phrases.filter(phrase => phrase.stuff_id === stuffId);\r\n  };\r\n\r\n  _getParam = name => {\r\n    return this.params.find(param => param.name === name);\r\n  };\r\n\r\n  _getRange(name) {\r\n    return this.ranges.find(range => range.name === name);\r\n  }\r\n\r\n  _getGrad(name) {\r\n    return this.grads.find(grad => grad.name === name);\r\n  }\r\n\r\n  _editParams(changes) {\r\n    changes.forEach(change => {\r\n      const param = this._getParam(change.paramName);\r\n\r\n      if (param.isAchiev) {\r\n        param.value = true;\r\n      } else {\r\n        const newValue = param.value + change.term;\r\n        if (newValue > this.lim) {\r\n          param.value = this.lim;\r\n        } else if (newValue < 1) {\r\n          param.value = 1;\r\n        } else param.value = newValue;\r\n      }\r\n    });\r\n  }\r\n\r\n  checkStageFinal = stageId => {\r\n    const stuffs = this._getStuffs(stageId);\r\n    return !stuffs.find(s => !s.isA);\r\n  };\r\n\r\n  checkRange = rangeName => {\r\n    const range = this._getRange(rangeName);\r\n    const param = this._getParam(range.paramName);\r\n    const res = param.isAchiev\r\n      ? param.value === range.max\r\n      : param.value >= range.min && param.value <= range.max;\r\n    return res;\r\n  };\r\n\r\n  checkGrads = gradNames => {\r\n    return gradNames.find(gName => this.checkGrad(gName));\r\n  };\r\n\r\n  checkGrad = gradName => {\r\n    const grad = this._getGrad(gradName);\r\n    const ranges = grad.rangesNames.map(rName => this._getRange(rName));\r\n    const params = [];\r\n    ranges.forEach(range => {\r\n      if (!params[range.paramName]) {\r\n        params[range.paramName] = this.checkRange(range.name);\r\n      }\r\n    });\r\n    for (let key in params) {\r\n      if (!params[key]) return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  idState = {};\r\n  getId = type => {\r\n    if (!this.idState[type]) this.idState[type] = 0;\r\n    this.idState[type]++;\r\n    return this.idState[type];\r\n  };\r\n\r\n  getStartId = () => {\r\n    const startTopic = this.topics.find(topic => topic.isStart);\r\n    const stages = this._getStages(startTopic.id);\r\n    const startStage = stages.find(stage => stage.isStart);\r\n    return startStage ? startStage.id : null;\r\n  };\r\n\r\n  calcStuff = stuffId => {\r\n    const stuff = this.stuffs.find(s => s.id === stuffId);\r\n\r\n    this._editParams(stuff.changes);\r\n  };\r\n\r\n  getGeneralPhrase = stuffId => {\r\n    const stuff = this.stuffs.find(s => s.id === stuffId);\r\n    const phrases = this._getPhrases(stuff.id);\r\n    const generalPhrase = phrases.find(phrase => phrase.isGeneral);\r\n    return generalPhrase?.text;\r\n  };\r\n\r\n  checkStuffByAchiev = id => {\r\n    const stuff = this.stuffs.find(s => s.id === id);\r\n    if (!stuff.next_stage_id) return false;\r\n    const nextStage = this.stages.find(s => s.id === stuff.next_stage_id);\r\n    const stage = this.stages.find(s => s.id === stuff.stage_id);\r\n    const topic = this._getTopic(stage.topic_id);\r\n\r\n    const result = topic.gradNames.find(gName => {\r\n      const grad = this._getGrad(gName);\r\n\r\n      return (\r\n        nextStage.isStart &&\r\n        Boolean(\r\n          grad.rangesNames.find(rName => {\r\n            const range = this._getRange(rName);\r\n            const param = this._getParam(range.paramName);\r\n            return param.isAchiev;\r\n          })\r\n        )\r\n      );\r\n    });\r\n    return result;\r\n  };\r\n\r\n  getCorrectPhrase = stuffId => {\r\n    const stuff = this.stuffs.find(s => s.id === stuffId);\r\n    const phrases = this._getPhrases(stuff.id);\r\n    const neutralPhrase = phrases.find(phrase => !phrase.rangeName);\r\n    for (let i in phrases) {\r\n      const phrase = phrases[i];\r\n      if (phrase.rangeName && this.checkRange(phrase.rangeName))\r\n        return phrase.text;\r\n    }\r\n\r\n    return neutralPhrase.text;\r\n  };\r\n\r\n  _getCorrectStuffs = id => {\r\n    const stage = this.stages.find(s => s.id === id);\r\n    stage.isBeen = true;\r\n    const currentTopic = this._getTopic(stage.topic_id);\r\n\r\n    const answersAll = this._getStuffs(id);\r\n\r\n    const replicStuff = answersAll.find(stuff => stuff.isA);\r\n    const replic = new Interf(null, this.getCorrectPhrase(replicStuff.id));\r\n\r\n    let answersNotA = answersAll.filter(stuff => {\r\n      return !(stuff.isA || stuff.isIntro);\r\n    });\r\n\r\n    if (!answersNotA.length) {\r\n      this.topicQ++;\r\n\r\n      if (this.topicQ < this.topicLim) {\r\n        this.topics.forEach(topic => {\r\n          const nextStage = this._getStages(topic.id).find(\r\n            stage => stage.isStart\r\n          );\r\n          const nextTopic = this._getTopic(nextStage.topic_id);\r\n          if (!nextStage.isBeen && !nextTopic.isStart && !nextTopic.isFin) {\r\n            const nextStuff = this._getStuffs(nextStage.id).find(\r\n              stuff => stuff.isIntro\r\n            );\r\n            answersNotA.push(nextStuff);\r\n          }\r\n        });\r\n\r\n        answersNotA = answersNotA.filter(a => {\r\n          if (this.checkStuffByAchiev(a.id)) {\r\n            const nextStage = this.stages.find(s => s.id === a.next_stage_id);\r\n            const nextTopic = this._getTopic(nextStage.topic_id);\r\n            return this.checkGrads(nextTopic.gradNames);\r\n          } else return true;\r\n        });\r\n\r\n        answersNotA.sort(() => Math.random() - 0.5);\r\n\r\n        answersNotA = answersNotA.slice(0, 3);\r\n      } else if (!currentTopic.isFin) {\r\n        const finalTopic = this.topics.find(topic => {\r\n          return topic.isFin && this.checkGrads(topic.gradNames);\r\n        });\r\n        const finalStage = this._getStages(finalTopic.id).find(s => s.isStart);\r\n        const finalAnswer = this._getStuffs(finalStage.id).find(s => s.isIntro);\r\n        answersNotA.push(finalAnswer);\r\n      }\r\n    }\r\n\r\n    return { resAnswers: answersNotA, replic };\r\n  };\r\n\r\n  getInterfaceStage = id => {\r\n    const { resAnswers, replic } = this._getCorrectStuffs(id);\r\n\r\n    const interf = {\r\n      answers: resAnswers.map(stuff => {\r\n        return new Interf(\r\n          this.getGeneralPhrase(stuff.id),\r\n          this.getCorrectPhrase(stuff.id),\r\n          stuff.id\r\n        );\r\n      }),\r\n      replic\r\n    };\r\n\r\n    return interf;\r\n  };\r\n\r\n  ssign = data => {\r\n    for (let key in data) {\r\n      if (![\"params\", \"grads\", \"ranges\", \"topicLim\"].find(k => k === key)) {\r\n        this[key] = data[key];\r\n      }\r\n    }\r\n  };\r\n}\r\n","export const GRAD_PAN_APA = \"ПАН АПАТ\";\r\nexport const GRAD_PAN_UNC = \"ПАН НЕУВ\";\r\nexport const GRAD_PAN_CON = \"ПАН УВ\";\r\n\r\nexport const GRAD_TEN_APA = \"НАПР АПАТ\";\r\nexport const GRAD_TEN_UNC = \"НАПР НЕУВ\";\r\nexport const GRAD_TEN_CON = \"НАПР УВ\";\r\n\r\nexport const GRAD_STAB_APA = \"СТАБ АПАТ\";\r\nexport const GRAD_STAB_UNC = \"СТАБ НЕУВ\";\r\nexport const GRAD_STAB_CON = \"СТАБ УВ\";\r\n\r\nexport const GRAD_DOG = \"УПОМИНАЛА О СОБАКЕ\";\r\nexport const GRAD_GC = \"УПОМИНАЛ О СЕБЕ\";\r\nexport const GRAD_CRUSH = \"УПОМИНАЛА О ПАРНЕ\";\r\nexport const GRAD_NOODLE = \"УПОМИНАЛА О ЛАПШЕ\";\r\nexport const GRAD_PHOTO = \"УПОМИНАЛА О ФОТО\";\r\nexport const GRAD_PANICS = \"УПОМИНАЛА О ПАНИКАХ\";\r\n","import React from \"react\";\r\nimport UI from \"./UI\";\r\nimport Screen from \"./Screen\";\r\nimport locE from \"../../game/loc_example\";\r\nimport mlpaState from \"../../mlpa_state\";\r\n\r\nexport default class Game extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.landWidth = 1920;\r\n    this.landHeight = 1080;\r\n\r\n    this.loc = locE;\r\n    this.loc.ssign(mlpaState);\r\n    this.defaultParams();\r\n  }\r\n  defaultParams() {\r\n    this.loc.params.forEach(p => {\r\n      if (!p.isAchiev) p.value = 2;\r\n    });\r\n  }\r\n  getSizes() {\r\n    const { width, height } = window.screen;\r\n\r\n    const max = Math.max(width, height);\r\n    const min = Math.min(width, height);\r\n\r\n    let newWidth = max;\r\n\r\n    const factorW = newWidth / this.landWidth;\r\n    let newHeight = this.landHeight * factorW;\r\n    if (newHeight > min) {\r\n      newHeight = min;\r\n      const factorH = newHeight / this.landHeight;\r\n      newWidth = this.landWidth * factorH;\r\n    }\r\n    return { newWidth, newHeight };\r\n  }\r\n  render() {\r\n    const { newWidth, newHeight } = this.getSizes();\r\n    return (\r\n      <Screen width={newWidth} height={newHeight}>\r\n        <UI\r\n          loc={this.loc}\r\n          width={newWidth}\r\n          height={newHeight}\r\n          landSizes={{ landWidth: this.landWidth, landHeight: this.landHeight }}\r\n        />\r\n      </Screen>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class TopicItem extends React.Component {\r\n  render() {\r\n    const { topic, isSelect, click } = this.props;\r\n\r\n    const border = topic.isStart\r\n      ? \"solid 0.3rem red\"\r\n      : topic.isFin\r\n      ? \"solid 0.3rem aqua\"\r\n      : \"none\";\r\n\r\n    const style = {\r\n      backgroundColor: isSelect ? \"green\" : \"gray\",\r\n      display: \"inline-block\",\r\n      margin: \"0.2rem\",\r\n      padding: \"0.5rem\",\r\n      cursor: \"pointer\",\r\n      color: \"white\",\r\n      border\r\n    };\r\n    return (\r\n      <div\r\n        style={style}\r\n        onClick={() => {\r\n          click(topic.id);\r\n        }}\r\n      >\r\n        {topic.name}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class StageItem extends React.Component {\r\n  render() {\r\n    const { stage, click, isSelect, stuffText, methods } = this.props;\r\n\r\n    const isFinal = methods.checkStageFinal(stage.id);\r\n    const border = stage.isStart\r\n      ? \"solid 0.3rem red\"\r\n      : isFinal\r\n      ? \"solid 0.3rem aqua\"\r\n      : \"none\";\r\n\r\n    const style = {\r\n      backgroundColor: isSelect ? \"blue\" : \"gray\",\r\n      cursor: \"pointer\",\r\n      display: \"inline-block\",\r\n      margin: \"0.2rem\",\r\n      padding: \"0.5rem\",\r\n      color: \"white\",\r\n      border\r\n    };\r\n    return (\r\n      <div\r\n        onClick={() => {\r\n          click(stage.id);\r\n        }}\r\n        style={style}\r\n      >\r\n        {stuffText(stage.id)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class StuffItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const nextStage = props.allStages.find(\r\n      s => s.id === props.stuff.next_stage_id\r\n    );\r\n    const currentTopic = nextStage?.topic_id;\r\n\r\n    this.state = {\r\n      currentTopic,\r\n      viewAchievs: false\r\n    };\r\n  }\r\n  render() {\r\n    const {\r\n      stuff,\r\n      methods,\r\n      range,\r\n      stat,\r\n      goStage,\r\n      allStages,\r\n      stuffText,\r\n      allTopics\r\n    } = this.props;\r\n\r\n    const phrase = methods.getPhrases(stuff.id).find(p => {\r\n      return (\r\n        p.rangeName === range ||\r\n        (range === \"none\" && !p.rangeName) ||\r\n        (range === \"GENERAL\" && p.isGeneral)\r\n      );\r\n    });\r\n\r\n    const { changes } = stuff;\r\n    const { currentTopic, viewAchievs } = this.state;\r\n\r\n    const isSpecial = !(stuff.isA || stuff.isIntro);\r\n\r\n    const changesItems = isSpecial\r\n      ? stat.params.map(p => {\r\n          const c = changes.find(change => change.paramName === p.name);\r\n\r\n          const term = c ? c.term : p.isAchiev ? false : 0;\r\n\r\n          const inputElem = p.isAchiev ? (\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={term}\r\n              onChange={e => {\r\n                methods.updateStuff(stuff.id, stuff.next_stage_id, {\r\n                  paramName: p.name,\r\n                  term: Boolean(e.target.checked)\r\n                });\r\n              }}\r\n            />\r\n          ) : (\r\n            <input\r\n              type=\"number\"\r\n              style={{ width: \"40px\" }}\r\n              value={term}\r\n              onChange={e => {\r\n                methods.updateStuff(stuff.id, stuff.next_stage_id, {\r\n                  paramName: p.name,\r\n                  term: Number(e.target.value)\r\n                });\r\n              }}\r\n            />\r\n          );\r\n\r\n          if (!viewAchievs && p.isAchiev) return null;\r\n          return (\r\n            <span\r\n              style={{\r\n                display: \"inline-block\",\r\n                padding: \"0.5rem\",\r\n                backgroundColor: \"#ffccff\",\r\n                marginRight: \"0.5rem\"\r\n              }}\r\n              key={p.name}\r\n            >\r\n              {p.name}:{inputElem}\r\n            </span>\r\n          );\r\n        })\r\n      : null;\r\n\r\n    const style = {\r\n      backgroundColor: stuff.isA\r\n        ? \"#ccffff\"\r\n        : stuff.isIntro\r\n        ? \" #ffe6b3\"\r\n        : \"#D3D3D3\",\r\n      cursor: \"pointer\",\r\n      margin: \"0.2rem\",\r\n\r\n      paddingTop: stuff.isA ? \"1rem\" : \"0.5rem\",\r\n      paddingBottom: stuff.isA ? \"1rem\" : \"0.5rem\",\r\n\r\n      display: \"inline-block\",\r\n      width: \"40%\"\r\n    };\r\n\r\n    const text = phrase ? phrase.text : \"\";\r\n\r\n    const linkItems = methods.getStages(this.state.currentTopic).map(s => {\r\n      return (\r\n        <option value={s.id} key={s.id}>\r\n          {stuffText(s.id)}\r\n        </option>\r\n      );\r\n    });\r\n\r\n    if (!allStages.find(s => s.id === stuff.next_stage_id)) {\r\n      linkItems.unshift(\r\n        <option value={\"error\"} key=\"0\">\r\n          {stuff.next_stage_id} NOT FOUND\r\n        </option>\r\n      );\r\n    }\r\n\r\n    const linkThemesItems = allTopics.map(t => {\r\n      return (\r\n        <option value={t.id} key={t.id}>\r\n          {t.name}\r\n        </option>\r\n      );\r\n    });\r\n\r\n    const next = isSpecial ? (\r\n      <div style={{ display: \"inline-block\", marginRight: \"0.5rem\" }}>\r\n        <div\r\n          style={{\r\n            display: \"inline-block\",\r\n            backgroundColor: \"red\",\r\n            cursor: \"pointer\",\r\n            color: \"white\"\r\n          }}\r\n          onClick={() => {\r\n            goStage(stuff.next_stage_id);\r\n          }}\r\n        >\r\n          ===>\r\n        </div>\r\n        {currentTopic}\r\n\r\n        <select\r\n          value={this.state.currentTopic}\r\n          onChange={e => {\r\n            const newCurrTopic = Number(e.target.value);\r\n            this.setState({ currentTopic: newCurrTopic });\r\n            const topicStages = methods.getStages(newCurrTopic);\r\n\r\n            if (\r\n              topicStages.length &&\r\n              !topicStages.find(s => s.id === stuff.next_stage_id)\r\n            )\r\n              methods.updateStuff(stuff.id, topicStages[0].id);\r\n          }}\r\n        >\r\n          {linkThemesItems}\r\n        </select>\r\n\r\n        <select\r\n          value={stuff.next_stage_id}\r\n          onChange={e => {\r\n            methods.updateStuff(stuff.id, Number(e.target.value));\r\n          }}\r\n        >\r\n          {linkItems}\r\n        </select>\r\n      </div>\r\n    ) : null;\r\n\r\n    const removeButton = isSpecial ? (\r\n      <button onClick={() => methods.removeStuff(stuff.id)}>X</button>\r\n    ) : null;\r\n\r\n    const viewBox = !isSpecial ? null : (\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={viewAchievs}\r\n        onChange={e => {\r\n          this.setState({ viewAchievs: e.target.checked });\r\n        }}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        {removeButton}\r\n        <div style={style}>\r\n          ({stuff.id}){\" \"}\r\n          <input\r\n            value={text}\r\n            style={{ width: \"90%\" }}\r\n            onChange={e => {\r\n              methods.updatePhrase(\r\n                stuff.id,\r\n                range === \"none\" ? null : range,\r\n                phrase ? phrase.id : null,\r\n                e.target.value\r\n              );\r\n            }}\r\n          />\r\n        </div>\r\n        {next}\r\n        {changesItems}\r\n        {viewBox}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class RangeItem extends React.Component {\r\n  render() {\r\n    const { range, isSelect, click } = this.props;\r\n\r\n    const style = {\r\n      backgroundColor: isSelect ? \"orange\" : \"gray\",\r\n      cursor: \"pointer\",\r\n      display: \"inline-block\",\r\n      margin: \"0.2rem\",\r\n      padding: \"0.5rem\",\r\n      color: \"white\"\r\n    };\r\n    return (\r\n      <div\r\n        style={style}\r\n        onClick={() => {\r\n          click(range.name);\r\n        }}\r\n      >\r\n        {range.name}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class AddStuff extends React.Component {\r\n  render() {\r\n    const { methods, stageId, topic } = this.props;\r\n\r\n    const nextStageId = methods.getStages(topic.id)[0].id;\r\n\r\n    return (\r\n      <div>\r\n        <button\r\n          onClick={() => {\r\n            methods.addStuff(stageId, false, nextStageId, []);\r\n          }}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport StuffItem from \"../Stuffs/StuffItem\";\r\nimport RangeItem from \"../Ranges/RangeItem\";\r\nimport AddStuff from \"../Stuffs/AddStuff\";\r\n\r\nexport default class Stage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { currentRange: \"none\", acheivs: false };\r\n  }\r\n\r\n  click = name => {\r\n    this.setState({ currentRange: name });\r\n  };\r\n  splitStuffs(stuffs) {\r\n    const answer = stuffs.find(stuff => stuff.isA);\r\n    const pAnswers = stuffs.filter(stuff => !stuff.isA);\r\n    return { answer, pAnswers };\r\n  }\r\n  sortItems = (stuffA, stuffB) => {\r\n    const isTopA = Boolean(stuffA.isA || stuffA.isIntro);\r\n    const isTopB = Boolean(stuffB.isA || stuffB.isIntro)\r\n\r\n\r\n    return  isTopB - isTopA\r\n\r\n  }\r\n  render() {\r\n    const {\r\n      stage,\r\n      methods,\r\n      stat,\r\n      changeStage,\r\n      allStages,\r\n      stuffText,\r\n      topic,\r\n      allTopics\r\n    } = this.props;\r\n\r\n    const stuffs = methods.getStuffs(stage.id);\r\n\r\n    const { answer, pAnswers } = this.splitStuffs(stuffs);\r\n\r\n    const stuffsItems = [answer, ...pAnswers].sort(this.sortItems).map(stuff => {\r\n      const res = stuff ? (\r\n        <StuffItem\r\n          stat={stat}\r\n          range={this.state.currentRange}\r\n          methods={methods}\r\n          key={stuff.id}\r\n          stuff={stuff}\r\n          goStage={changeStage}\r\n          allStages={allStages}\r\n          allTopics={allTopics}\r\n          stuffText={stuffText}\r\n        />\r\n      ) : null;\r\n\r\n      return res;\r\n    });\r\n\r\n    if (\"GENERAL\" === this.state.currentRange) {\r\n      stuffsItems.shift();\r\n    }\r\n\r\n    const { ranges } = stat;\r\n\r\n    const generStuff = (\r\n      <RangeItem\r\n        isSelect={\"GENERAL\" === this.state.currentRange}\r\n        range={{ name: \"GENERAL\" }}\r\n        click={this.click}\r\n      />\r\n    );\r\n\r\n    const noRanges = (\r\n      <RangeItem\r\n        isSelect={\"none\" === this.state.currentRange}\r\n        range={{ name: \"none\" }}\r\n        click={this.click}\r\n      />\r\n    );\r\n\r\n    const rangesItems = ranges\r\n      .filter(r => {\r\n        const param = methods.getParam(r.paramName);\r\n        return this.state.acheivs || !param.isAchiev;\r\n      })\r\n      .map(range => (\r\n        <RangeItem\r\n          isSelect={range.name === this.state.currentRange}\r\n          key={range.name}\r\n          range={range}\r\n          click={this.click}\r\n        />\r\n      ));\r\n\r\n    return (\r\n      <div>\r\n        <h2 align=\"center\">\r\n          {stuffText(stage.id)}{\" \"}\r\n          <button\r\n            onClick={() => {\r\n              methods.removeStage(stage.id);\r\n            }}\r\n          >\r\n            X\r\n          </button>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={stage.isStart}\r\n            onChange={e => {\r\n              methods.updateStage(stage.id, e.target.checked);\r\n            }}\r\n          />\r\n        </h2>\r\n        {generStuff}\r\n        {noRanges}\r\n        {rangesItems}\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={this.state.acheivs}\r\n          onChange={e => {\r\n            this.setState({ acheivs: e.target.checked });\r\n          }}\r\n        />\r\n        {stuffsItems}\r\n        <AddStuff topic={topic} methods={methods} stageId={stage.id} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport StageItem from \"../Stages/StageItem\";\r\nimport Stage from \"../Stages/Stage\";\r\n\r\nexport default class Topic extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = { newStageStart: false, showGrads: false };\r\n  }\r\n  stuffText = id => {\r\n    if (id) {\r\n      const { methods } = this.props;\r\n\r\n      const nextStuff = methods.getStuffs(id).find(stuff => stuff.isA);\r\n\r\n      if (nextStuff) {\r\n        const nextPhrases = methods.getPhrases(nextStuff.id);\r\n        const nextPhrase = nextPhrases.find(p => !p.rangeName);\r\n\r\n        if (nextPhrase) {\r\n          return `(${id}) ${nextPhrase.text.slice(0, 7)}...`;\r\n        } else return `(${id}) NOT PHRASE...`;\r\n      } else return \"NOT FOUND\";\r\n    }\r\n    return null;\r\n  };\r\n  render() {\r\n    const {\r\n      topic,\r\n      stat,\r\n      methods,\r\n      currentStage,\r\n      click,\r\n      changeStage,\r\n      allStages,\r\n      allTopics\r\n    } = this.props;\r\n\r\n    const { showGrads } = this.state;\r\n\r\n    const stages = methods.getStages(topic.id);\r\n    const stagesItems = stages.map(stage => {\r\n      const isSelect = stage.id === currentStage;\r\n\r\n      return (\r\n        <StageItem\r\n          methods={methods}\r\n          stuffText={this.stuffText}\r\n          key={stage.id}\r\n          stage={stage}\r\n          isSelect={isSelect}\r\n          click={click}\r\n        />\r\n      );\r\n    });\r\n\r\n    const curStage = stages.find(stage => stage.id === currentStage);\r\n\r\n    const stageView = currentStage ? (\r\n      <Stage\r\n        stage={curStage}\r\n        methods={methods}\r\n        stat={stat}\r\n        allStages={allStages}\r\n        allTopics={allTopics}\r\n        changeStage={changeStage}\r\n        stuffText={this.stuffText}\r\n        topic={topic}\r\n      />\r\n    ) : null;\r\n\r\n    return (\r\n      <div>\r\n        <h1 align=\"center\">\r\n          Topic{\" \"}\r\n          <input\r\n            value={topic.name}\r\n            onChange={e => {\r\n              methods.updateTopic(\r\n                topic.id,\r\n                e.target.value,\r\n                topic.gradNames,\r\n                topic.isFin,\r\n                topic.isStart\r\n              );\r\n            }}\r\n          />\r\n          , grads:\r\n          <input type=\"checkbox\" checked={showGrads} onChange={e => {this.setState({showGrads: e.target.checked})}}/>\r\n          {showGrads\r\n            ? stat.grads.map(g => (\r\n                <div key={g.name}>\r\n                  {g.name}\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={Boolean(\r\n                      topic.gradNames.find(grad => grad === g.name)\r\n                    )}\r\n                    onChange={e => {\r\n                      methods.updateTopicGrads(\r\n                        topic.id,\r\n                        g.name,\r\n                        !e.target.checked\r\n                      );\r\n                    }}\r\n                  />\r\n                </div>\r\n              ))\r\n            : null}\r\n          Start:\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={topic.isStart}\r\n            onChange={e => {\r\n              methods.updateTopic(\r\n                topic.id,\r\n                topic.name,\r\n                topic.gradNames,\r\n                topic.isFin,\r\n                e.target.checked\r\n              );\r\n            }}\r\n          />\r\n          Final:\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={topic.isFin}\r\n            onChange={e => {\r\n              methods.updateTopic(\r\n                topic.id,\r\n                topic.name,\r\n                topic.gradNames,\r\n                e.target.checked,\r\n                topic.isStart\r\n              );\r\n            }}\r\n          />\r\n          <button\r\n            onClick={() => {\r\n              methods.removeTopic(topic.id);\r\n            }}\r\n            style={{ marginLeft: \"1rem\" }}\r\n          >\r\n            X\r\n          </button>\r\n        </h1>\r\n\r\n        <br />\r\n        <div>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={this.state.newStageStart}\r\n            onChange={e => {\r\n              this.setState({ newStageStart: e.target.checked });\r\n            }}\r\n          />\r\n          <button\r\n            onClick={() => {\r\n              methods.addStage(topic.id, this.state.newStageStart);\r\n            }}\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n        {stagesItems}\r\n        <br />\r\n        {stageView}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class AddTopic extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      graduation: props.stat.grads[0].name,\r\n      name: \"\",\r\n      isFin: false,\r\n      isStart: false\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { graduation, name, isFin, isStart } = this.state;\r\n    const { stat, methods } = this.props;\r\n    const { grads } = stat;\r\n    const optItems = grads.map(grad => (\r\n      <option value={grad.name} key={grad.name}>\r\n        {grad.name}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <div>\r\n        <input\r\n          value={name}\r\n          onChange={e => {\r\n            this.setState({ name: e.target.value });\r\n          }}\r\n        />\r\n        <select\r\n          value={graduation}\r\n          onChange={e => {\r\n            this.setState({ graduation: e.target.value });\r\n          }}\r\n        >\r\n          {optItems}\r\n        </select>\r\n        Start:\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={isStart}\r\n          onChange={e => {\r\n            this.setState({ isStart: e.target.checked });\r\n          }}\r\n        />\r\n        Final:\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={isFin}\r\n          onChange={e => {\r\n            this.setState({ isFin: e.target.checked });\r\n          }}\r\n        />\r\n        <button\r\n          onClick={() => {\r\n            methods.addTopic(name, graduation, isFin, isStart);\r\n          }}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport locE from \"../../game/loc_example\";\r\n//import locE from \"./../../game/loc_example\";\r\nimport TopicItem from \"./Topics/TopicItem\";\r\nimport Topic from \"./Topics/Topic\";\r\nimport AddTopic from \"./Topics/AddTopic\";\r\nimport exportFromJSON from \"export-from-json\";\r\nimport mlpaState from \"../../mlpa_state\";\r\n\r\nexport default class Editor extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.myStorage = window.localStorage;\r\n    this.loc = {};\r\n    this.import(true);\r\n    const { topicId, stageId } = this.getTopStag();\r\n    this.state = { currentTopic: topicId, currentStage: stageId };\r\n  }\r\n\r\n  import(firstTime) {\r\n    this.loc = locE;\r\n\r\n    this.loc.ssign({ ...mlpaState });\r\n    if (!firstTime) this.forceUpdate();\r\n  }\r\n\r\n  getTopStag() {\r\n    const topicId = this.loc.topics[0] ? this.loc.topics[0].id : null;\r\n    const stageId = this.loc._getStages(topicId)[0]\r\n      ? this.loc._getStages(topicId)[0].id\r\n      : null;\r\n    return { topicId, stageId };\r\n  }\r\n\r\n  exportFile() {\r\n    const data = this.loc;\r\n    const fileName = \"mlpa_state\";\r\n    const exportType = \"json\";\r\n\r\n    exportFromJSON({ data, fileName, exportType });\r\n  }\r\n\r\n  addTopic = (name, gradName, isFin, isStart) => {\r\n    this.loc.cTopic(name, gradName, isFin, isStart);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  addStage = (topicId, isStart) => {\r\n    const intro = this.loc.cStuff(\r\n      { isIntro: true },\r\n      this.loc.cPhrase(\"introSpace\"),\r\n      this.loc.cPhrase(\"introGenSpace\", true)\r\n    );\r\n\r\n    const space = this.loc.cStuff({ isA: true }, this.loc.cPhrase(\"space\"));\r\n\r\n    const stuffs = isStart ? [intro, space] : [space];\r\n\r\n    this.loc.addStages(topicId, this.loc.cStage(isStart, ...stuffs));\r\n    this.forceUpdate();\r\n  };\r\n  updateStage = (id, isStart) => {\r\n    const stage = this.loc.stages.find(s => s.id === id);\r\n    stage.isStart = isStart;\r\n    this.forceUpdate();\r\n  };\r\n  updateTopic = (topicId, name, gradNames, isFin, isStart) => {\r\n    const topic = this.loc._getTopic(topicId);\r\n    topic.name = name;\r\n    topic.gradNames = gradNames;\r\n    topic.isFin = isFin;\r\n    topic.isStart = isStart;\r\n    this.forceUpdate();\r\n  };\r\n  updateTopicGrads = (id, gradName, isDelete = false) => {\r\n    const topic = this.loc._getTopic(id)\r\n    if(isDelete){\r\n      const index = topic.gradNames.findIndex(g => g === gradName)\r\n      topic.gradNames.splice(index, 1)\r\n    }\r\n    else {\r\n      topic.gradNames.push(gradName)\r\n    }\r\n    this.forceUpdate();\r\n  }\r\n  addPhrase = (stuffId, range, text, isGeneral) => {\r\n    this.loc.addPhrases(stuffId, [this.loc.cPhrase(text, isGeneral, range)]);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  updatePhrase = (stuffId, range, id, newText) => {\r\n    const phrase = this.loc.phrases.find(p => p.id === id);\r\n    if (phrase) {\r\n      phrase.text = newText;\r\n      if (!newText && !phrase.isGeneral && phrase.rangeName)\r\n        this.removePhrase(phrase.id);\r\n    } else {\r\n      this.addPhrase(stuffId, range, newText);\r\n    }\r\n    this.forceUpdate();\r\n  };\r\n\r\n  addStuff = (stageId, isA, nextStageId, changes = []) => {\r\n    const newStaff = this.loc.cStuff(\r\n      {\r\n        isA,\r\n        id: nextStageId\r\n      },\r\n      this.loc.cPhrase(\"space\"),\r\n      this.loc.cPhrase(\"generalSpace\", true)\r\n    );\r\n\r\n    this.loc.addStuffs(stageId, newStaff);\r\n\r\n    this.forceUpdate();\r\n  };\r\n  updateStuff = (id, nextStageId, ...changes) => {\r\n    const stuff = this.loc.stuffs.find(s => s.id === id);\r\n    stuff.next_stage_id = nextStageId;\r\n    changes.forEach(change => {\r\n      const changeIndex = stuff.changes.findIndex(\r\n        c => c.paramName === change.paramName\r\n      );\r\n      const thisStuffCh = stuff.changes[changeIndex];\r\n\r\n      const changeTerm = change.term;\r\n\r\n      if (!thisStuffCh) {\r\n        stuff.changes.push(this.loc.cChange(change.paramName, changeTerm));\r\n      } else {\r\n        if (changeTerm) thisStuffCh.term = changeTerm;\r\n        else stuff.changes.splice(changeIndex, 1);\r\n        console.log(thisStuffCh);\r\n      }\r\n    });\r\n    this.forceUpdate();\r\n  };\r\n\r\n  removeTopic = id => {\r\n    const index = this.loc.topics.findIndex(t => t.id === id);\r\n    this.loc.topics.splice(index, 1);\r\n    const stages = this.loc._getStages(id);\r\n    stages.forEach(s => {\r\n      this.removeStage(s.id);\r\n    });\r\n\r\n    this.setState({ currentTopic: null, currentStage: null });\r\n    this.forceUpdate();\r\n  };\r\n  removeStage = id => {\r\n    const index = this.loc.stages.findIndex(s => s.id === id);\r\n    this.loc.stages.splice(index, 1);\r\n    const stuffs = this.loc._getStuffs(id);\r\n    stuffs.forEach(s => {\r\n      if (s.next_stage_id === id) {\r\n        s.next_stage_id = null;\r\n      }\r\n      this.removeStuff(s.id);\r\n    });\r\n    this.setState({ currentStage: null });\r\n    this.forceUpdate();\r\n  };\r\n  removeStuff = id => {\r\n    const index = this.loc.stuffs.findIndex(s => s.id === id);\r\n    this.loc.stuffs.splice(index, 1);\r\n    const phrases = this.loc._getPhrases(id);\r\n    phrases.forEach(p => {\r\n      this.removePhrase(p.id);\r\n    });\r\n    this.forceUpdate();\r\n  };\r\n  removePhrase = id => {\r\n    const index = this.loc.phrases.findIndex(p => p.id === id);\r\n    this.loc.phrases.splice(index, 1);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  click = id => {\r\n    const firstStage = this.loc._getStages(id)[0];\r\n    if (firstStage) this.changeStage(firstStage.id);\r\n    else this.setState({ currentTopic: id, currentStage: null });\r\n    this.forceUpdate();\r\n  };\r\n  changeStage = id => {\r\n    const stage = this.loc.stages.find(s => s.id === id);\r\n    if (stage) {\r\n      this.setState({ currentTopic: stage.topic_id, currentStage: id });\r\n    }\r\n\r\n    this.forceUpdate();\r\n  };\r\n\r\n  render() {\r\n    const { topics, grads, params, ranges } = this.loc;\r\n    const stat = {\r\n      grads,\r\n      params,\r\n      ranges\r\n    };\r\n\r\n    const { currentStage, currentTopic } = this.state;\r\n\r\n    const methods = {\r\n      addTopic: this.addTopic,\r\n      addStage: this.addStage,\r\n      updateStage: this.updateStage,\r\n      updateTopic: this.updateTopic,\r\n      updateTopicGrads: this.updateTopicGrads,\r\n      removeTopic: this.removeTopic,\r\n      removeStage: this.removeStage,\r\n      updateStuff: this.updateStuff,\r\n      removeStuff: this.removeStuff,\r\n      getStages: this.loc._getStages,\r\n      getStuffs: this.loc._getStuffs,\r\n      getPhrases: this.loc._getPhrases,\r\n      addStuff: this.addStuff,\r\n      updatePhrase: this.updatePhrase,\r\n      addPhrase: this.addPhrase,\r\n      removePhrase: this.removePhrase,\r\n      getParam: this.loc._getParam,\r\n      checkStageFinal: this.loc.checkStageFinal\r\n    };\r\n\r\n    const topicItems = topics.map(topic => {\r\n      const isSelect = topic.id === currentTopic;\r\n      return (\r\n        <TopicItem\r\n          key={topic.id}\r\n          topic={topic}\r\n          methods={methods}\r\n          isSelect={isSelect}\r\n          click={this.click}\r\n        />\r\n      );\r\n    });\r\n\r\n    const topicView = currentTopic ? (\r\n      <Topic\r\n        allTopics={this.loc.topics}\r\n        allStages={this.loc.stages}\r\n        currentStage={currentStage}\r\n        topic={topics.find(topic => topic.id === this.state.currentTopic)}\r\n        stat={stat}\r\n        methods={methods}\r\n        goTopic={this.click}\r\n        click={this.changeStage}\r\n        changeStage={this.changeStage}\r\n      />\r\n    ) : null;\r\n\r\n    console.log(this.loc);\r\n    return (\r\n      <div>\r\n        <button onClick={() => this.import()}>import</button>\r\n        <button onClick={() => this.exportFile()}>export</button>\r\n        <br />\r\n        <AddTopic methods={methods} stat={stat} />\r\n        {topicItems}\r\n        {topicView}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Game from \"./components/Game/Game\";\r\nimport Editor from \"./components/Editor/Editor\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Game />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '@fortawesome/fontawesome-free/css/all.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}